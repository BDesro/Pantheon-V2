[gd_scene load_steps=19 format=3 uid="uid://csop24phi7hqi"]

[ext_resource type="Script" uid="uid://cf31ow351bto6" path="res://scripts/world.gd" id="1_k0juu"]
[ext_resource type="PackedScene" uid="uid://da5qaqmpvsa64" path="res://scenes/player.tscn" id="1_nnsk1"]
[ext_resource type="PackedScene" uid="uid://bwioxsuk4ften" path="res://assets/tiles/WorldTileMap.tscn" id="2_jhx03"]
[ext_resource type="PackedScene" uid="uid://bykflutfldv1h" path="res://scenes/snake_spawner.tscn" id="5_e3hyu"]
[ext_resource type="Script" uid="uid://xywqb7k0ad5o" path="res://scripts/game_ui.gd" id="5_i7141"]
[ext_resource type="FontFile" uid="uid://obg2py2apxig" path="res://assets/fonts/Orange Kid.otf" id="5_qfnet"]
[ext_resource type="PackedScene" uid="uid://b7dsjvske0oja" path="res://scenes/HealthBar.tscn" id="6_i7141"]
[ext_resource type="Script" uid="uid://wc3k4v7id8uh" path="res://scripts/wave_label.gd" id="7_q5onr"]
[ext_resource type="Script" uid="uid://divg5oweyi6wo" path="res://scripts/num_enemies_label.gd" id="8_jhx03"]
[ext_resource type="Script" uid="uid://h2tx5yvtfb28" path="res://scripts/pause_menu.gd" id="9_7r4gi"]
[ext_resource type="Script" uid="uid://d4dvwe3srwhi3" path="res://scripts/ability_hot_bar.gd" id="9_o8fc1"]
[ext_resource type="PackedScene" uid="uid://djyri8nicqsrg" path="res://scenes/pause_menu.tscn" id="9_w7kh3"]
[ext_resource type="PackedScene" uid="uid://bm1vw6a6my02m" path="res://scenes/wave_spawner.tscn" id="10_w7kh3"]
[ext_resource type="PackedScene" uid="uid://c2ual51w4orrs" path="res://scenes/game_over.tscn" id="11_e3hyu"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_4mrxx"]
resource_local_to_scene = true

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_7r4gi"]
resource_local_to_scene = true
bg_color = Color(0.431424, 0.677699, 0.306412, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_q5onr"]
bg_color = Color(0.6, 0.6, 0.6, 0)
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color(0, 0, 0, 1)
expand_margin_left = 2.0
expand_margin_top = 2.0
expand_margin_right = 2.0
expand_margin_bottom = 2.0

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_jhx03"]
bg_color = Color(0.6, 0.6, 0.6, 0)
border_width_left = 30
border_width_top = 30
border_width_right = 30
border_width_bottom = 30
border_color = Color(0, 0, 0, 1)
border_blend = true
corner_detail = 10

[node name="world" type="Node2D"]
script = ExtResource("1_k0juu")

[node name="WorldTileMap" parent="." instance=ExtResource("2_jhx03")]

[node name="player" parent="." instance=ExtResource("1_nnsk1")]
visibility_layer = 2

[node name="GameUI" type="CanvasLayer" parent="."]
script = ExtResource("5_i7141")

[node name="Control" type="Control" parent="GameUI"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
metadata/_edit_use_anchors_ = true

[node name="NameLabel" type="Label" parent="GameUI/Control"]
layout_mode = 1
anchors_preset = -1
anchor_left = -0.717262
anchor_top = -10.7589
anchor_right = -0.600595
anchor_bottom = -10.6849
offset_left = 1753.14
offset_top = 12603.6
offset_right = 1753.14
offset_bottom = 12603.6
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
size_flags_vertical = 6
theme_override_fonts/font = ExtResource("5_qfnet")
theme_override_font_sizes/font_size = 40
text = "Soldier"
horizontal_alignment = 2
vertical_alignment = 1
metadata/_edit_use_anchors_ = true

[node name="NinePatchRect" type="NinePatchRect" parent="GameUI/Control"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.325
anchor_top = 0.903704
anchor_right = 0.675
anchor_bottom = 0.980556
grow_horizontal = 2
grow_vertical = 0
patch_margin_left = 64
patch_margin_right = 64
metadata/_edit_use_anchors_ = true

[node name="HealthBar" parent="GameUI/Control/NinePatchRect" instance=ExtResource("6_i7141")]
custom_minimum_size = Vector2(600, 33)
layout_mode = 1
anchor_top = 0.415709
anchor_right = 1.0
anchor_bottom = 0.813299
offset_top = 6.04583
offset_bottom = -6.04583
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 6
size_flags_vertical = 6
theme_override_styles/background = SubResource("StyleBoxEmpty_4mrxx")
theme_override_styles/fill = SubResource("StyleBoxFlat_7r4gi")
label_on = true

[node name="PanelContainer" type="PanelContainer" parent="GameUI/Control/NinePatchRect/HealthBar"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_q5onr")

[node name="ScoreLabel" type="Label" parent="GameUI/Control"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.566667
anchor_top = 0.874074
anchor_right = 0.675
anchor_bottom = 0.930556
grow_horizontal = 2
grow_vertical = 2
theme_override_fonts/font = ExtResource("5_qfnet")
theme_override_font_sizes/font_size = 50
text = "Score: 0"
horizontal_alignment = 2
metadata/_edit_use_anchors_ = true

[node name="WaveLabel" type="Label" parent="GameUI/Control"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.45
anchor_top = 0.0148148
anchor_right = 0.550521
anchor_bottom = 0.0990741
theme_override_colors/font_color = Color(1, 1, 1, 1)
theme_override_fonts/font = ExtResource("5_qfnet")
theme_override_font_sizes/font_size = 75
text = "Wave: 0"
script = ExtResource("7_q5onr")
metadata/_edit_use_anchors_ = true

[node name="PanelContainer" type="PanelContainer" parent="GameUI/Control"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_jhx03")

[node name="NumEnemiesLabel" type="Label" parent="GameUI/Control"]
layout_mode = 0
offset_left = 32.0
offset_top = 32.0
offset_right = 448.0
offset_bottom = 93.0
theme_override_fonts/font = ExtResource("5_qfnet")
theme_override_font_sizes/font_size = 50
text = "Enemies Remaining: "
script = ExtResource("8_jhx03")

[node name="AbilityHotBar" type="Control" parent="GameUI/Control"]
layout_mode = 1
anchor_left = 0.7
anchor_top = 0.77037
anchor_right = 0.9875
anchor_bottom = 0.977778
script = ExtResource("9_o8fc1")
metadata/_edit_use_anchors_ = true

[node name="PauseMenu" parent="." instance=ExtResource("9_w7kh3")]
script = ExtResource("9_7r4gi")

[node name="GameOver" parent="." instance=ExtResource("11_e3hyu")]

[node name="WaveSpawner" parent="." instance=ExtResource("10_w7kh3")]
spawners = Array[NodePath]([NodePath("../SnakeSpawner"), NodePath("../SnakeSpawner2"), NodePath("../SnakeSpawner3"), NodePath("../SnakeSpawner4")])

[node name="SnakeSpawner" parent="." instance=ExtResource("5_e3hyu")]
position = Vector2(264, 264)

[node name="SnakeSpawner2" parent="." instance=ExtResource("5_e3hyu")]
position = Vector2(-264, 264)

[node name="SnakeSpawner3" parent="." instance=ExtResource("5_e3hyu")]
position = Vector2(264, -264)

[node name="SnakeSpawner4" parent="." instance=ExtResource("5_e3hyu")]
position = Vector2(-264, -264)

[connection signal="pause_pressed" from="." to="PauseMenu" method="_on_pause_button_pressed"]
[connection signal="ready" from="." to="." method="_on_ready"]
[connection signal="ready" from="GameUI" to="GameUI" method="_on_ready"]
[connection signal="resumed" from="PauseMenu" to="." method="_on_pause_menu_resumed"]
